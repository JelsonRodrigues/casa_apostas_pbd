CREATE SCHEMA CASA_APOSTAS;

CREATE TABLE CASA_DE_APOSTA (
    ID_CASA_APOSTA  SMALLSERIAL PRIMARY KEY,
    NOME            VARCHAR(20) NOT NULL,
    CNPJ            CHAR(18) UNIQUE NOT NULL,
    DATA_CRIACAO    TIMESTAMP,
    ENDERECO        VARCHAR(100),
    TELEFONE        VARCHAR(15)
);

CREATE TABLE USUARIO (
    ID_USUARIO      SMALLSERIAL PRIMARY KEY,
    NOME            VARCHAR(15),
    SOBRENOME       VARCHAR(15),
    DATA_NASCIMENTO TIMESTAMP,
    ENDERECO        VARCHAR(100),
    TELEFONE        VARCHAR(15),
    SENHA           VARCHAR(88) NOT NULL,
    EMAIL           VARCHAR(50) NOT NULL,
    CPF             VARCHAR(11) UNIQUE NOT NULL,
    TIPO            SMALLINT NOT NULL
);

CREATE TABLE GERENCIA (
    ID_USUARIO_ADMINISTRADOR    SMALLINT,
    ID_CASA_APOSTA              SMALLINT,

    CONSTRAINT pk_gerencia PRIMARY KEY (ID_USUARIO_ADMINISTRADOR, ID_CASA_APOSTA),
    CONSTRAINT fk_gerencia_administrador FOREIGN KEY (ID_USUARIO_ADMINISTRADOR) REFERENCES USUARIO (ID_USUARIO)
        ON DELETE CASCADE
        ON UPDATE CASCADE,
    CONSTRAINT fk_gerencia_casa FOREIGN KEY (ID_CASA_APOSTA) REFERENCES CASA_DE_APOSTA (ID_CASA_APOSTA)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE CLIENTES (
    ID_CASA_APOSTA          SMALLINT PRIMARY KEY,
    ID_USUARIO_APOSTADOR    SMALLINT PRIMARY KEY,
    SALDO                   DECIMAL (10,2)  NOT NULL,


)